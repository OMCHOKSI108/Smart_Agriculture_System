<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Agriculture System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h2 class="text-center mb-4">Smart Agriculture System</h2>
        
        <div class="card p-4 mb-4">
            <h4>Plant Disease Classification</h4>
            <form id="uploadForm" enctype="multipart/form-data">
                <input type="file" id="imageInput" class="form-control mb-2">
                <button type="submit" class="btn btn-primary">Predict Disease</button>
            </form>
            <p id="diseaseResult" class="mt-3 text-success"></p>
        </div>
        
        <div class="card p-4">
            <h4>Irrigation Recommendation</h4>
            <form id="irrigationForm">
                <input type="number" id="temperature" placeholder="Temperature" class="form-control mb-2">
                <input type="number" id="humidity" placeholder="Humidity" class="form-control mb-2">
                <input type="number" id="soilMoisture" placeholder="Soil Moisture" class="form-control mb-2">
                <button type="submit" class="btn btn-success">Get Recommendation</button>
            </form>
            <p id="irrigationResult" class="mt-3 text-info"></p>
        </div>
    </div>
    
    <script>
        document.getElementById("uploadForm").onsubmit = async function(event) {
            event.preventDefault();
            let formData = new FormData();
            formData.append("file", document.getElementById("imageInput").files[0]);
            let response = await fetch("/predict_disease", { method: "POST", body: formData });
            let result = await response.json();
            document.getElementById("diseaseResult").innerText = result.prediction;
        };
        
        document.getElementById("irrigationForm").onsubmit = async function(event) {
            event.preventDefault();
            let data = {
                temperature: document.getElementById("temperature").value,
                humidity: document.getElementById("humidity").value,
                soil_moisture: document.getElementById("soilMoisture").value
            };
            let response = await fetch("/recommend_irrigation", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });
            let result = await response.json();
            document.getElementById("irrigationResult").innerText = result.recommendation;
        };
    </script>
</body>
</html>